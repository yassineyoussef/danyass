<!doctype html>
<html lang="fr">
<head>
	<title>Tank fight !</title>
	<meta charset="utf-8">
	<style>
		canvas {
			border: 3px solid black;

			margin: auto;
			display: block;
		}
	</style>


<body>


	<canvas id="gameCanvas" width="500" height="500"></canvas>
	<script src = "jquery-1.12.1.min.js">
	</script>

	<script src = "/socket.io/socket.io.js"></script>
	<script>
		    //require('socket.io-client');
			//console.log(io());
			//console.log(io.Socket());
			//return;
			var socket = io.connect();
			var monVraiNom = "";

			// on connection to server, ask for user's name with an anonymous callback
			socket.on('connect', function(){
				// call the server-side function 'adduser' and send one parameter (value of prompt)
				monVraiNom = prompt("Votre nom : ")
				socket.emit('adduser',monVraiNom);
			});

			// listener, whenever the server emits 'updatechat', this updates the chat body 
			socket.on('updatechat', function (username, data) {
				$('#conversation').append('<b>'+username + ':</b> ' + data + '<br>');
			});

			// listener, whenever the server emits 'updateusers', this updates the username list
			socket.on('updateusers', function(data) {
				$('#users').empty();
				$.each(data, function(key, value) {
					$('#users').append('<div>' + key + '</div>');
				});
			});

			

			socket.on('refuse', function(data) {
				console.log(data);
			});

			// on load of page
			$(function(){
				// when the client clicks SEND
				$('#datasend').click( function() {
					var message = $('#data').val();
					$('#data').val('');
					// tell server to execute 'sendchat' and send along one parameter
					socket.emit('sendchat', message);
				});

				// when the client hits ENTER on their keyboard
				$('#data').keypress(function(e) {
					if(e.which == 13) {
						$(this).blur();
						$('#datasend').focus().click();
					}
				});
			});



	</script>
	<script src="complete_rewrite_battle.js"></script>


</body>
</html>
